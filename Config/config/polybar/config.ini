include-file = ~/.config/polybar/colors.ini

[bar/main]
width                         = 100%
height                        = 2.5%
dpi                           = 96
fixed-center                  = true
background                    = ${colors.background}
foreground                    = ${colors.foreground}
line-size                     = 2pt
padding-left                  = 1
padding-right                 = 1
module-margin                 = 1.2
font-0                        = JetBrainsMonoNerdFontPropo;3
modules-left                  = custom-menu tray xworkspaces
modules-center                = date
modules-right                 = afssize cpu memory
cursor-click                  = pointer
cursor-scroll                 = ns-resize
enable-ipc                    = true

[settings]
screenchange-reload           = true
pseudo-transparency           = true

[module/custom-menu]
format-foreground             = ${colors.primary}
type = custom/script
exec = bash -c 'os=$(cat /etc/salt/grains | head -1 | cut -d "-" -f 2 | tr a-z A-Z); echo " $os"'
interval = 10000

[module/xworkspaces]
type                          = internal/xworkspaces
label-active                  = %name%
label-active-background       = ${colors.background-alt}
label-active-underline        = ${colors.primary}
label-active-padding          = 1
label-occupied                = %name%
label-occupied-padding        = 1
label-urgent                  = %name%
label-urgent-background       = ${colors.error}
label-urgent-padding          = 1
label-empty                   = %name%
label-empty-foreground        = ${colors.foreground}
label-empty-padding           = 1

[module/date]
type                          = internal/date
interval                      = 1
date                          = %H:%M
date-alt                      = %d.%m.%Y %H:%M:%S
label                         = %date%
label-foreground              = ${colors.foreground}

[module/cpu]
type                          = internal/cpu
interval                      = 4
format-foreground             = ${colors.primary}
label                         =  %percentage%%

[module/memory]
type                          = internal/memory
interval                      = 4
format-foreground             = ${colors.primary}
label                         =  %percentage_used%%

[module/tray]
type                          = internal/tray
tray-size                     = 70%
tray-spacing                  = 8pt

[module/afssize]
format-foreground             = ${colors.primary}
type = custom/script
exec = bash -c 'used=$(fs quota ~/afs | cut -d'%' -f1); echo " $used%"'
interval = 16
